var x=Object.defineProperty,C=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var l=(e,t,i)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c=(e,t)=>{for(var i in t||(t={}))R.call(t,i)&&l(e,i,t[i]);if(w)for(var i of w(t))v.call(t,i)&&l(e,i,t[i]);return e},f=(e,t)=>C(e,m(t));var h=(e,t,i)=>(l(e,typeof t!="symbol"?t+"":t,i),i);import{c as T,u as k,G as b,T as K,n as z,R as F,C as L,A}from"./vendor.3d52ef1c.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};O();const P={layout:[],selectedKey:null},_=T(()=>{_.set(P)});function E(e){k(_,t=>f(c({},t),{selectedKey:e}))}const S={selectKey:E},I={layout:_},N={position:{x:0,y:0},padding:{x:0,y:0},borderWidth:0,borderColor:0,borderRadius:0,backgroundColor:15724527,text:""};class W{constructor(t){h(this,"_graphics",new b);h(this,"_options");this._options=c(c({},N),t),this._graphics.interactive=!0,this._graphics.cursor="pointer",this._draw()}appendTo(t){t.addChild(this._graphics)}_draw(){this._graphics.clear();const t=new K(this._options.text),i=(this._options.width||t.width)+this._options.padding.x,r=(this._options.height||t.height)+this._options.padding.y;t.x=this._options.position.x+this._options.padding.x/2,t.y=this._options.position.y+this._options.padding.y/2,this._graphics.addChild(t),this._graphics.lineStyle({width:this._options.borderWidth,color:this._options.borderColor}),this._graphics.beginFill(this._options.backgroundColor),this._graphics.drawRoundedRect(this._options.position.x,this._options.position.y,i,r,this._options.borderRadius),this._graphics.endFill()}}class p{constructor(t,i,r,s){h(this,"id",z());h(this,"_graphics",new b);h(this,"_subscriptions",[]);this._app=t,this._appSettings=i,this._position=r,this._size=s,this._graphics.interactive=!0,this._graphics.cursor="pointer",this._graphics.on("pointerdown",this._onClick.bind(this)),this._initSubscriptions(),this._draw()}_initSubscriptions(){var t;this._subscriptions.push((t=this._app.state)==null?void 0:t.layout.listen(()=>this._draw()))}_onClick(t){S.selectKey(this.id),t.stopPropagation()}_draw(){var g,y;const t=this._appSettings.unitSize,i=this._appSettings.keyCapCornerRadius,r=((y=(g=this._app.state)==null?void 0:g.layout.value)==null?void 0:y.selectedKey)===this.id,s=this._position.x*t,o=this._position.y*t,a=this._size.width*t-1,u=this._size.height*t-1;this._graphics.clear(),this._graphics.zIndex=r?100:1,this._graphics.lineStyle({width:1,color:r?15026179:0}),this._graphics.beginFill(13421772),this._graphics.drawRoundedRect(s,o,a,u,i*t),this._graphics.endFill(),this._graphics.lineStyle({width:1,color:12040119}),this._graphics.beginFill(16579836),this._graphics.drawRoundedRect(s+t*.1,o+t*.07,a-t*.2,u-t*.2,i*t*.8),this._graphics.endFill()}destroy(){this._app.stage.removeChild(this._graphics),this._destroySubscriptions()}_destroySubscriptions(){for(const t of this._subscriptions)t==null||t()}appendTo(t){t.addChild(this._graphics)}}class B{constructor(t,i){h(this,"_container",new L);h(this,"_keyCaps",[]);this._app=t,this._appSettings=i,this._container.hitArea=new F(0,0,t.view.width,t.view.height),this._container.interactive=!0,this._container.sortableChildren=!0,this._app.stage.addChild(this._container),new p(this._app,this._appSettings,{x:1,y:1},{width:1,height:1}).appendTo(this._container),new p(this._app,this._appSettings,{x:2,y:1},{width:2,height:1}).appendTo(this._container),new p(this._app,this._appSettings,{x:1,y:2},{width:1,height:2}).appendTo(this._container),new p(this._app,this._appSettings,{x:2,y:2},{width:6.25,height:1}).appendTo(this._container),new W({text:"+",position:{x:20,y:20},padding:{x:11,y:0},borderRadius:100,backgroundColor:0}).appendTo(this._container),this._initSubscriptions()}_initSubscriptions(){this._container.on("pointerdown",()=>{var t,i;((i=(t=this._app.state)==null?void 0:t.layout.value)==null?void 0:i.selectedKey)&&S.selectKey(null)})}}const n=document.getElementById("pixi-container"),d=new A({backgroundColor:16777215,resolution:window.devicePixelRatio,antialias:!0,width:n==null?void 0:n.clientWidth,height:n==null?void 0:n.clientHeight});d.state=I;d.stage.sortableChildren=!0;const G={unitSize:70,keyCapCornerRadius:.1};n&&(n.innerHTML="");n==null||n.appendChild(d.view);new B(d,G);
