var b=Object.defineProperty,m=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var l=(s,t,i)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i,f=(s,t)=>{for(var i in t||(t={}))C.call(t,i)&&l(s,i,t[i]);if(y)for(var i of y(t))R.call(t,i)&&l(s,i,t[i]);return s},w=(s,t)=>m(s,v(t));var h=(s,t,i)=>(l(s,typeof t!="symbol"?t+"":t,i),i);import{c as x,u as K,n as z,G as L,R as k,C as T,A}from"./vendor.8fe83a52.js";const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};F();const O={layout:[],selectedKey:null},d=x(()=>{d.set(O)});function P(s){K(d,t=>w(f({},t),{selectedKey:s}))}const S={selectKey:P},E={layout:d};class c{constructor(t,i,r,e){h(this,"id",z());h(this,"_graphics",new L);h(this,"_subscriptions",[]);this._app=t,this._appSettings=i,this._position=r,this._size=e,this._graphics.interactive=!0,this._graphics.cursor="pointer",this._graphics.on("pointerdown",this._onClick.bind(this)),this._initSubscriptions(),this._draw()}_initSubscriptions(){var t;this._subscriptions.push((t=this._app.state)==null?void 0:t.layout.listen(()=>this._draw()))}_onClick(t){S.selectKey(this.id),t.stopPropagation()}_draw(){var _,g;const t=this._appSettings.unitSize,i=this._appSettings.keyCapCornerRadius,r=((g=(_=this._app.state)==null?void 0:_.layout.value)==null?void 0:g.selectedKey)===this.id,e=this._position.x*t,n=this._position.y*t,a=this._size.width*t-1,u=this._size.height*t-1;this._graphics.clear(),this._graphics.zIndex=r?100:1,this._graphics.lineStyle({width:1,color:r?15026179:0}),this._graphics.beginFill(13421772),this._graphics.drawRoundedRect(e,n,a,u,i*t),this._graphics.endFill(),this._graphics.lineStyle({width:1,color:12040119}),this._graphics.beginFill(16579836),this._graphics.drawRoundedRect(e+t*.1,n+t*.07,a-t*.2,u-t*.2,i*t*.8),this._graphics.endFill()}destroy(){this._app.stage.removeChild(this._graphics),this._destroySubscriptions()}_destroySubscriptions(){for(const t of this._subscriptions)t==null||t()}appendTo(t){t.addChild(this._graphics)}}class I{constructor(t,i){h(this,"_container",new T);h(this,"_keyCaps",[]);this._app=t,this._appSettings=i,this._container.hitArea=new k(0,0,t.view.width,t.view.height),this._container.interactive=!0,this._container.sortableChildren=!0,this._app.stage.addChild(this._container),new c(this._app,this._appSettings,{x:1,y:1},{width:1,height:1}).appendTo(this._container),new c(this._app,this._appSettings,{x:2,y:1},{width:2,height:1}).appendTo(this._container),new c(this._app,this._appSettings,{x:1,y:2},{width:1,height:2}).appendTo(this._container),new c(this._app,this._appSettings,{x:2,y:2},{width:6.25,height:1}).appendTo(this._container),this._initSubscriptions()}_initSubscriptions(){this._container.on("pointerdown",()=>{var t,i;((i=(t=this._app.state)==null?void 0:t.layout.value)==null?void 0:i.selectedKey)&&S.selectKey(null)})}}const o=document.getElementById("pixi-container"),p=new A({backgroundColor:16777215,resolution:window.devicePixelRatio,antialias:!0,width:o==null?void 0:o.clientWidth,height:o==null?void 0:o.clientHeight});p.state=E;p.stage.sortableChildren=!0;const N={unitSize:70,keyCapCornerRadius:.1};o&&(o.innerHTML="");o==null||o.appendChild(p.view);new I(p,N);
